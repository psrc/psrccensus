<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Census estimates for non-census geographies • psrccensus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Census estimates for non-census geographies">
<meta name="description" content="harnessing geographic splits for standard PSRC planning geographies
">
<meta property="og:description" content="harnessing geographic splits for standard PSRC planning geographies
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">psrccensus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/psrccensus.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/calculate-reliability-moe-transformed-acs.html">Reliability Measures for ACS data tables</a></li>
    <li><a class="dropdown-item" href="../articles/geographic-conversions.html">Census estimates for non-census geographies</a></li>
    <li><a class="dropdown-item" href="../articles/get-data.html">Get Data</a></li>
    <li><a class="dropdown-item" href="../articles/pums-1-basics.html">PUMS 1: Calculate basic summaries</a></li>
    <li><a class="dropdown-item" href="../articles/pums-2-make-vars.html">PUMS 2: Make your own variables</a></li>
    <li><a class="dropdown-item" href="../articles/pums-3-multiyear.html">PUMS 3: Script multiyear functions</a></li>
    <li><a class="dropdown-item" href="../articles/pums-4-local-downloads.html">PUMS 4: Download optimization</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Census estimates for non-census geographies</h1>
            
      

      <div class="d-none name"><code>geographic-conversions.Rmd</code></div>
    </div>

    
    
<p>Every Census estimate is linked to a geography. However, not every
geography is linked to a Census estimate.</p>
<p>Since the Census Bureau cannot publish data at every conceivable
scale, data users often approximate a custom boundary by choosing a set
of disaggregate Census geographies (e.g. block, block group, or tract)
that closely align with it. This approach is very often adequate to the
purpose.</p>
<div class="section level3">
<h3 id="geographic-conversion-via-a-granular-proxy-variable">Geographic conversion via a granular proxy variable<a class="anchor" aria-label="anchor" href="#geographic-conversion-via-a-granular-proxy-variable"></a>
</h3>
<p>For more geographic precision, we in effect disaggregate the estimate
to a granular scale–specifically, parcel–by assuming the estimate is in
direct proportion either to a variable reported at that scale (housing
units), or to one of several population measures we can apportion to
that scale (e.g. OFM total population).</p>
<p>With this in mind, PSRC has developed demographic ratios to convert
estimates from Census geographies to its own planning geographies. Each
planning geography has its own <a href="../reference/census_to_psrcgeo.html">function</a>:</p>
<ul>
<li>Regional Growth Strategy classes - <code><a href="../reference/census_to_psrcgeo.html">census_to_rgs()</a></code>
</li>
<li>Regional Growth Centers - <code><a href="../reference/census_to_psrcgeo.html">census_to_rgc()</a></code>
</li>
<li>Manufacturing-Industrial Centers - <code><a href="../reference/census_to_psrcgeo.html">census_to_mic()</a></code>
</li>
<li>Traffic Analysis Zones - <code><a href="../reference/census_to_psrcgeo.html">census_to_taz()</a></code>
</li>
<li>High Capacity Transit Station areas -
<code><a href="../reference/census_to_psrcgeo.html">census_to_hct()</a></code>
</li>
<li>2020 Jurisdictional boundaries - <code><a href="../reference/census_to_psrcgeo.html">census_to_juris()</a></code>
</li>
</ul>
<p>As long as you’re using the default proxy variable (total
population), you only need a single argument: the name of the dataframe
(as returned by <code><a href="../reference/get_acs_recs.html">get_acs_recs()</a></code> or
<code><a href="../reference/get_decennial_recs.html">get_decennial_recs()</a></code>) you wish to convert.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psrc.github.io/psrccensus/">psrccensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_acs_recs.html">get_acs_recs</a></span><span class="op">(</span>geography <span class="op">=</span> <span class="st">'block group'</span>,</span>
<span>                  table.names <span class="op">=</span> <span class="st">'B03002'</span>,</span>
<span>                  years <span class="op">=</span> <span class="fl">2021</span>,</span>
<span>                  acs.type <span class="op">=</span> <span class="st">'acs5'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>label<span class="op">=</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">label</span>,<span class="st">"(^Estimate!!|Total:!!)"</span>,<span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span><span class="op">==</span><span class="st">"B03002_012"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">.</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   GEOID        variable   estimate   moe label              </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 530330001011 B03002_012       28    33 Hispanic or Latino:</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 530330001012 B03002_012      188   176 Hispanic or Latino:</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 530330001013 B03002_012       48    50 Hispanic or Latino:</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 530330001021 B03002_012        0    13 Hispanic or Latino:</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 530330001022 B03002_012      181   206 Hispanic or Latino:</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 530330001023 B03002_012      110   151 Hispanic or Latino:</span></span>
<span></span>
<span><span class="va">rgc_race</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/census_to_psrcgeo.html">census_to_rgc</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rgc_race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">variable</span><span class="op">==</span><span class="st">"B03002_012"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">.</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">7</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;                      planning_geog   variable  year estimate</span></span>
<span><span class="co">#&gt;                             &lt;char&gt;     &lt;char&gt; &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:   not in regional growth center B03002_012  2021   415884</span></span>
<span><span class="co">#&gt; 2:               Seattle Northgate B03002_012  2021      719</span></span>
<span><span class="co">#&gt; 3:    Seattle University Community B03002_012  2021     1921</span></span>
<span><span class="co">#&gt; 4:                  Seattle Uptown B03002_012  2021      649</span></span>
<span><span class="co">#&gt; 5: Seattle First Hill/Capitol Hill B03002_012  2021     3318</span></span>
<span><span class="co">#&gt; 6:        Seattle South Lake Union B03002_012  2021      380</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="selecting-the-correct-proxy">Selecting the correct proxy<a class="anchor" aria-label="anchor" href="#selecting-the-correct-proxy"></a>
</h3>
<p>The key assumption behind this method is the direct relationship
between the granular proxy variable and the Census variable of interest:
the stronger this relationship, the more defensible the result. Before
splitting a geography, consider which of these metrics is most relevant
to your Census estimate of interest:</p>
<ul>
<li>
<strong><code>total_pop</code></strong> –i.e. total population (the
default)</li>
<li><strong><code>household_pop</code></strong></li>
<li><strong><code>group_quarters_pop</code></strong></li>
<li><strong><code>housing_units</code></strong></li>
<li><strong><code>occupied_housing_units</code></strong></li>
</ul>
<p>You can specify these using the <code>wgt</code> argument:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_acs_recs.html">get_acs_recs</a></span><span class="op">(</span>geography <span class="op">=</span> <span class="st">'tract'</span>,</span>
<span>                  table.names <span class="op">=</span> <span class="st">'B26001'</span>,</span>
<span>                  years <span class="op">=</span> <span class="fl">2019</span>,</span>
<span>                  acs.type <span class="op">=</span> <span class="st">'acs5'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>label<span class="op">=</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">label</span>,<span class="st">"(^Estimate!!|Total:!!)"</span>,<span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">.</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   GEOID       estimate   moe label  concept                  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 53033000100       38    24 Total: GROUP QUARTERS POPULATION</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 53033000200       87   150 Total: GROUP QUARTERS POPULATION</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 53033000300       16     5 Total: GROUP QUARTERS POPULATION</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 53033000401       89    32 Total: GROUP QUARTERS POPULATION</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 53033000402      239   151 Total: GROUP QUARTERS POPULATION</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 53033000500       21    20 Total: GROUP QUARTERS POPULATION</span></span>
<span></span>
<span><span class="va">rgc_gq_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/census_to_psrcgeo.html">census_to_rgs</a></span><span class="op">(</span><span class="va">y</span>, wgt<span class="op">=</span><span class="st">"group_quarters_pop"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rgc_gq_age</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">.</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;    planning_geog   variable  label  year estimate</span></span>
<span><span class="co">#&gt;           &lt;char&gt;     &lt;char&gt; &lt;char&gt; &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:         Rural B26001_001 Total:  2019     4848</span></span>
<span><span class="co">#&gt; 2:         Metro B26001_001 Total:  2019    38944</span></span>
<span><span class="co">#&gt; 3:           HCT B26001_001 Total:  2019     8117</span></span>
<span><span class="co">#&gt; 4:          Core B26001_001 Total:  2019    11580</span></span>
<span><span class="co">#&gt; 5:            UU B26001_001 Total:  2019     7224</span></span>
<span><span class="co">#&gt; 6:   CitiesTowns B26001_001 Total:  2019     4945</span></span></code></pre></div>
<p>If your dataframe combines tables that would most appropriately apply
two different proxy metrics–for example, one linked to total population,
and another linked to housing units–you might divide the dataframe (or
alter your code to retrieve separate tables originally) before applying
the geographic conversion.</p>
</div>
<div class="section level3">
<h3 id="further-geographies">Further geographies<a class="anchor" aria-label="anchor" href="#further-geographies"></a>
</h3>
<p>The set of planning geographies is not strictly limited to the five
listed above; with approval, the set can be expanded (see the <a href="http://aws-linux/mediawiki/index.php/Geography_Split_Tables_in_Elmer" class="external-link">documentation</a>
- PSRC VPN required to view).</p>
<p>To convert census estimates to custom geographies that don’t have
stored splits, use the <code><a href="../reference/census_to_customgeo.html">census_to_customgeo()</a></code> function. This
performs an analogous conversion using the same parcel-level proxy
variables, but requires two additional arguments: an <code>sf</code>
package object (i.e. your custom geography/geometry), and the variable
name in that file that labels the geography. This function is much
slower than the PSRC planning geography functions listed above because
it must get parcel-level data from Elmer and create the custom splits
rather than just read them. Depending on your download speed and the
complexity of the geography, it’ll take a minute or two to run (still,
not shabby for this level of detail).</p>
</div>
<div class="section level3">
<h3 id="error-margins-limitations">Error margins &amp; limitations<a class="anchor" aria-label="anchor" href="#error-margins-limitations"></a>
</h3>
<p>Currently, split-derived calculations are limited to estimates only;
medians cannot be determined via this method. Analysts can calculate
shares by converting estimates of both the numerator and denominator to
the appropriate geography.</p>
<p>Although it may be harder to assume Margins of Error (MOE) are
directly proportional to the split weight, the assumption is applied
identically to both estimate and MOE, which seemed the best choice of
the available options.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Helmann, Christy Lam, Polina Butrina, Suzanne Childress, Michael Jensen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
