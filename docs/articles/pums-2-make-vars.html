<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Hints &amp; cautions for moving beyond PUMS-provided variables
">
<title>PUMS 2: Make your own variables • psrccensus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="PUMS 2: Make your own variables">
<meta property="og:description" content="Hints &amp; cautions for moving beyond PUMS-provided variables
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">psrccensus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/psrccensus.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/get-data.html">Get Data</a>
    <a class="dropdown-item" href="../articles/pums-1-basics.html">PUMS 1: Calculate basic summaries</a>
    <a class="dropdown-item" href="../articles/pums-2-make-vars.html">PUMS 2: Make your own variables</a>
    <a class="dropdown-item" href="../articles/pums-3-multiyear.html">PUMS 3: Script multiyear functions</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>PUMS 2: Make your own variables</h1>
            
      
      
      <div class="d-none name"><code>pums-2-make-vars.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="defining-your-own-variables-in-pums">Defining your own variables in PUMS<a class="anchor" aria-label="anchor" href="#defining-your-own-variables-in-pums"></a>
</h2>
<p>Why aren’t the variables included in the PUMS dataset enough? Many
PUMS categories offer more detail than is useful for an analysis, and so
need to be simplified to reflect its purpose (and to increase sample
sizes per category). Other cases may require defining a new variable
conditioned on multiple original variables. And finally, at times the
analysis may apply only to part of the population.</p>
<p>The srvyr object delivered by get_psrc_pums() can be altered
<strong>dplyr</strong> commands while maintaining the associated weights
and structure (see <a href="http://gdfe.co/srvyr/" class="external-link">its vignette</a>). We
recommend using the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> command, in combination with
<code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> or <code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code> to define a variable
that directly captures the needs of your analysis, so
<strong>psrccensus</strong> can deliver your intended statistics–and
especially, the associated margin of error–rather than attempting to
re-aggregate these from summary results.</p>
<div class="section level3">
<h3 id="hints-and-things-to-watch-out-for-when-recoding-pums-variables">Hints and things to watch out for when recoding PUMS variables:<a class="anchor" aria-label="anchor" href="#hints-and-things-to-watch-out-for-when-recoding-pums-variables"></a>
</h3>
<ul>
<li><p>Categorical (i.e. grouping) variables in srvyr are of Factor
datatype, and new categorical variables should also be Factor datatype.
This means the new or altered variable you create should use either the
<code><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor()</a></code> command or its quicker alternate,
<code><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor()</a></code>.</p></li>
<li><p>To sort your new variable categories in a particular order,
specify <code>factor(levels=)</code>; the default is alphabetical (the
only option if using the <code><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor()</a></code> command).</p></li>
<li><p>To assign <code>NA</code> use a constant as the right hand side,
such as <code>NA_character_</code>, <code>NA_integer_</code>, or
<code>NA_real_</code>, depending on what datatype you want. R assigns
type based on the first expression, and without context interprets
normal <code>NA</code> as a logical value.</p></li>
<li><p>For a catch-all (aka “else”) category, consider using the
<code>!is.na()</code> criterion rather than <code>TRUE</code>. Grouping
<code>NA</code> with other categories may obscure non-applicable
cases.</p></li>
<li><p>For logical conditions using value labels, the
<code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl()</a></code> function can be very handy, as regular expressions
can match one or many labels without typing out the entire label
(although you’ll want to craft your regex pattern carefully, so it
matches only the labels you intend it to).</p></li>
<li><p>For complex recoding you may find it convenient to call
<strong>get_psrc_pums()</strong> with the <code>labels=FALSE</code>
option, as the underlying value codes are shorter and more easily
handled with rules than are descriptive labels (use the <a href="https://www2.census.gov/programs-surveys/acs/tech_docs/pums/data_dict/" class="external-link">data
dictionary</a> to interpret value codes). Be aware this leaves all
columns as values.</p></li>
<li><p>If you are defining a variable using PUMS values, be aware of a
trap: R stores Factors as a hidden value that maps to a set of character
“levels”, which are what is displayed. While string comparisons with a
Factor will use the displayed “level”, numerical comparisons with a
Factor will use the hidden value, even if the “level” looks like an
integer (as PUMS values do). The way to handle this is to convert Factor
to character first in your <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> statement,
i.e. <code>as.integer(as.character(SOME_PUMS_VAR))</code>, as part of
your logical expression.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="handle-subsets-via-a-universal-variable-the-incl_nafalse-option">Handle subsets via a universal variable &amp; the
<code>incl_na=FALSE</code> option<a class="anchor" aria-label="anchor" href="#handle-subsets-via-a-universal-variable-the-incl_nafalse-option"></a>
</h3>
<p>Rather than removing observations with the dplyr::filter() command,
we recommend that you assign those cases <code>NA</code> in a custom
categorical variable–that way, you can use the full survey object in
repeated analyses without needing to manage different filtered subsets.
To exclude the <code>NA</code> category from a results
table–particularly useful when reporting subset shares via the
<code><a href="../reference/pums_stat.html">psrc_pums_count()</a></code> function–specify the
<code>incl_na=FALSE</code> option in any of the statistical functions.
This effectively filters the survey prior to running the statistic,
without affecting the data object itself. The default
<code>incl_na=TRUE</code> option includes <code>NA</code> groups and
gives accurate shares of the full population (or households, if that is
your unit of analysis).</p>
</div>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>Adding two custom variables with one mutate command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psrc.github.io/psrccensus/">psrccensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">pums19_5p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_psrc_pums.html">get_psrc_pums</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2019</span>, <span class="st">"p"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGEP"</span>,<span class="st">"SCHL"</span>,<span class="st">"ESR"</span><span class="op">)</span><span class="op">)</span>                           <span class="co"># Pull the data; </span></span>
<span>                                                                                           <span class="co">#    rather than pipe the result, use a separate assignment</span></span>
<span><span class="va">pums19_5p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>                                                                     <span class="co">#    so any issues with mutate() don't negate your download</span></span>
<span>  ed_25up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span>                                                                        <span class="co"># Use Factor datatype for categorical variables</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">AGEP</span><span class="op">&lt;</span><span class="fl">25</span>                               <span class="op">~</span> <span class="cn">NA_character_</span>,                     <span class="co"># Type-specific NA constant</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^(Bach|Mast|Prof|Doct)"</span>, <span class="va">SCHL</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Bachelor's degree or higher"</span>,     <span class="co"># Regex is concise; handy since PUMS labels can be wordy </span></span>
<span>                <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">SCHL</span><span class="op">)</span>                          <span class="op">~</span> <span class="st">"Less than a Bachelor's degree"</span><span class="op">)</span><span class="op">)</span>, <span class="co"># !is.na() criteria</span></span>
<span>  emp_25up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span>                                                                       <span class="co"># Mutate() can assign more than one variable</span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">AGEP</span><span class="op">&lt;</span><span class="fl">25</span>                               <span class="op">~</span> <span class="cn">NA_character_</span>,                     <span class="co"># Type-specific NA constant</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"at work$"</span>, <span class="va">ESR</span><span class="op">)</span>                <span class="op">~</span> <span class="st">"Employed"</span>,                        <span class="co"># Concise regex again; use care, checking the data dictionary</span></span>
<span>                <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ESR</span><span class="op">)</span>                           <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">ESR</span><span class="op">)</span><span class="op">)</span>,                <span class="co"># Retain NA for children under 16</span></span>
<span>      levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Employed"</span>,<span class="st">"Unemployed"</span>,<span class="st">"Not in labor force"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>                             <span class="co"># Preferred ordering via `levels=`</span></span>
<span>  </span>
<span><span class="va">emp_ed_all</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pums_stat.html">psrc_pums_count</a></span><span class="op">(</span><span class="va">pums19_5p</span>, group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"emp_25up"</span>, <span class="st">"ed_25up"</span><span class="op">)</span><span class="op">)</span>             <span class="co"># These shares reflect the entire population</span></span>
<span><span class="va">emp_ed_25up</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pums_stat.html">psrc_pums_count</a></span><span class="op">(</span><span class="va">pums19_5p</span>, group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"emp_25up"</span>, <span class="st">"ed_25up"</span><span class="op">)</span>, incl_na<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># No NA; same counts but shares for only age 25+, as intended</span></span></code></pre></div>
<p>Using <code>labels=FALSE</code> and <code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code> for
more a complex recode:</p>
<ul>
<li>Notice conversion first to character, then integer to allow numeric
comparisons.</li>
<li>This approach has particular advantage over label matching when
using value ranges</li>
<li>All variables use values (including ESR; grepl() used above only
works with labels)</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AGEP"</span>,<span class="st">"FOD1P"</span>,<span class="st">"FOD2P"</span>,<span class="st">"INDP"</span>,<span class="st">"ESR"</span><span class="op">)</span></span>
<span><span class="va">ftr_int</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">}</span>                                        <span class="co"># Micro-helper conversion function</span></span>
<span><span class="va">pums18_5p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_psrc_pums.html">get_psrc_pums</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2018</span>, <span class="st">"p"</span>, <span class="va">pvars</span>, labels<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>                              <span class="co"># Labels=FALSE leaves values--but they are still Factors!</span></span>
<span></span>
<span><span class="va">pums18_5p</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>   med_deg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="fu">ftr_int</span><span class="op">(</span><span class="va">FOD1P</span><span class="op">)</span>, <span class="fl">6100</span>, <span class="fl">6199</span><span class="op">)</span><span class="op">|</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="fu">ftr_int</span><span class="op">(</span><span class="va">FOD2P</span><span class="op">)</span>, <span class="fl">6100</span>, <span class="fl">6199</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Medical Degree"</span>,</span>
<span>                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"No medical degree"</span><span class="op">)</span><span class="op">)</span>,                                             <span class="co"># Regardless of age</span></span>
<span>   med_field <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="fu">ftr_int</span><span class="op">(</span><span class="va">ESR</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="fu">ftr_int</span><span class="op">(</span><span class="va">INDP</span><span class="op">)</span>, <span class="fl">7970</span>, <span class="fl">8290</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Medical industry, employed"</span>,</span>
<span>                 <span class="fu">ftr_int</span><span class="op">(</span><span class="va">ESR</span><span class="op">)</span><span class="op">==</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="fu">ftr_int</span><span class="op">(</span><span class="va">INDP</span><span class="op">)</span>, <span class="fl">7970</span>, <span class="fl">8290</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Medical industry, not currently employed"</span>,</span>
<span>                 <span class="fu">ftr_int</span><span class="op">(</span><span class="va">ESR</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">INDP</span><span class="op">)</span>          <span class="op">~</span> <span class="st">"Non-medical industry, employed"</span>,</span>
<span>                 <span class="fu">ftr_int</span><span class="op">(</span><span class="va">ESR</span><span class="op">)</span><span class="op">==</span><span class="fl">3</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">INDP</span><span class="op">)</span>                       <span class="op">~</span> <span class="st">"Non-medical industry, not currently employed"</span>,</span>
<span>                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>                                                   <span class="co"># Leaving out those not in the workforce  </span></span>
<span></span>
<span><span class="va">med_deg_work_all</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pums_stat.html">psrc_pums_count</a></span><span class="op">(</span><span class="va">pums18_5p</span>, group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"med_field"</span>,<span class="st">"med_deg"</span><span class="op">)</span><span class="op">)</span>       <span class="co"># These shares reflect the entire population</span></span>
<span><span class="va">med_deg_work_only</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pums_stat.html">psrc_pums_count</a></span><span class="op">(</span><span class="va">pums18_5p</span>, group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"med_field"</span>,<span class="st">"med_deg"</span><span class="op">)</span>, incl_na<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co"># These shares limited to workforce</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Craig Helmann, Christy Lam, Polina Butrina, Suzanne Childress, Michael Jensen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
