<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PUMS 1: Calculate basic summaries • psrccensus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="PUMS 1: Calculate basic summaries">
<meta name="description" content="Utilize Census microdata to go beyond Census-published statistics
">
<meta property="og:description" content="Utilize Census microdata to go beyond Census-published statistics
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">psrccensus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/psrccensus.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/calculate-reliability-moe-transformed-acs.html">Reliability Measures for ACS data tables</a></li>
    <li><a class="dropdown-item" href="../articles/geographic-conversions.html">Census estimates for non-census geographies</a></li>
    <li><a class="dropdown-item" href="../articles/get-data.html">Get Data</a></li>
    <li><a class="dropdown-item" href="../articles/pums-1-basics.html">PUMS 1: Calculate basic summaries</a></li>
    <li><a class="dropdown-item" href="../articles/pums-2-make-vars.html">PUMS 2: Make your own variables</a></li>
    <li><a class="dropdown-item" href="../articles/pums-3-multiyear.html">PUMS 3: Script multiyear functions</a></li>
    <li><a class="dropdown-item" href="../articles/pums-4-local-downloads.html">PUMS 4: Download optimization</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>PUMS 1: Calculate basic summaries</h1>
            
      

      <div class="d-none name"><code>pums-1-basics.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-census-microdata">What is Census microdata?<a class="anchor" aria-label="anchor" href="#what-is-census-microdata"></a>
</h2>
<p>Along with publishing summary statistics from the decennial Census or
American Community Survey (ACS), the Census Bureau also makes available
a subset of individual person and housing (incl. household) records,
called the Public Use Microdata Sample (PUMS). These can be used to
estimate models or to tabulate custom statistics unavailable in
Census-published summary statistics. Partly to safeguard privacy, PUMS
data is not categorized by standard Census geographies such as block,
block group or tract; instead the unit is the Public Use Microdata Area
(PUMA), an aggregation of tracts with total population between
100,000-200,000. In the past there were more than one set of PUMAs,
corresponding to different sampling rates; that is no longer the case
(PUMAs now consistently represent a 5 percent sample).</p>
<p>PUMS data include sampling weights in order to be extrapolated to a
larger population, and replication weights in order to calculate margins
of error. When PUMS is used to drill down to small subsets of the
population, particular attention should be paid to the margins of error
in drawing any conclusions from the data; see <a href="#sample-sizes-confidence-and-error-margins">section below</a>. The
Census Bureau resource <a href="https://www.census.gov/programs-surveys/acs/guidance/handbooks/pums.html" class="external-link">What
ACS Public Use Microdata Sample File Users Need to Know</a> is a helpful
resource if you have further questions about PUMS itself.</p>
</div>
<div class="section level2">
<h2 id="retrieve-pums-data-get_psrc_pums">Retrieve PUMS data: <em><code>get_psrc_pums()</code></em><a class="anchor" aria-label="anchor" href="#retrieve-pums-data-get_psrc_pums"></a>
</h2>
<p>The PSRC census package makes it easy to calculate standard summary
statistics by county and for the region as a whole. Data analysis with
the <strong>psrccensus</strong> package involves two steps:</p>
<p>The first step consists of retrieving the data of interest via the
<strong><code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code></strong> function. The arguments
are:</p>
<ul>
<li>
<strong>span</strong> - either 1 ,3 or 5, denoting the span of the
desired ACS survey (1yr from 2000-present; 3yr from 2007-13; 5yr from
2009-present)</li>
<li>
<strong>dyear</strong> - aka data year (concluding year for 3- or
5-yr ACS)</li>
<li>
<strong>level</strong> - the unit of analysis; “p” is equivalent to
“persons”, and “h” is equivalent to “households”</li>
<li>
<strong>vars</strong> - one or more PUMS variables in UPPERCASE (if
multiple, as a character vector)</li>
</ul>
<p>The result of <code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code> is a structured data
object (per the <a href="http://gdfe.co/srvyr/" class="external-link"><strong>srvyr</strong></a> package) that
has sampling and replication weights built in.</p>
<p><strong><code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code></strong> must be called
separately for each combination of <strong>span - dyear - level</strong>
you intend to use. For example, if you want to calculate both household
statistics and population statistics from the same survey (span and
year), you will still need to use <code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code> once for
households (level=“h”) and a second time for persons (‘level’=“p”). This
is necessary because in PUMS, households and persons are not perfectly
coextensive: household-level datasets do not contain persons living in
group quarters and person-level datasets are not filtered to households.
(Household datasets are further filtered to remove vacant units.) When
you invoke <code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code> we suggest you assign a name
that helps you differentiate between whatever <strong>span - dyear -
level</strong> combinations are relevant to your analysis.</p>
<p>Although PUMS variables are measured specific to either persons or
households, either unit of analysis can be associated with all
variables–persons inherit their respective household attributes (albeit
missing in the case of for group quarters), and households are, per
Census Bureau convention, assigned the person attributes of the adult
respondent (aka “householder; this is also true of published American
Community Survey estimates). Variables must be typed exactly, so it is
recommended to consult a PUMS data directory, especially since some
variables may differ between data years. The PUMS data dictionary from
2017- forward is captured in the R object
<strong><code><a href="https://walker-data.com/tidycensus/reference/pums_variables.html" class="external-link">tidycensus::pums_variables</a></code></strong> (filter by year
and survey). The Census Bureau also publishes <a href="https://www2.census.gov/programs-surveys/acs/tech_docs/pums/data_dict/" class="external-link">each
separate data dictionary online in html, pdf or txt</a>, which can be
easily searched via web browser.</p>
<div class="section level3">
<h3 id="built-in-psrc-variables">Built-in PSRC variables<a class="anchor" aria-label="anchor" href="#built-in-psrc-variables"></a>
</h3>
<p>In addition to variables listed in the Census PUMS data dictionary,
you can also select the following custom PSRC variables:</p>
<ul>
<li>
<strong>PRACE</strong> - person-level race/ethnicity in which
Hispanic/Latino is its own race category (non-overlapping with other
races)</li>
<li>
<strong>HRACE</strong> - household-level race/ethnicity considering
all members; ‘Multiple Races’ category as well as Hispanic/Latino</li>
<li>
<strong>NWRK</strong> - number of workers in household (from
composition of persons)</li>
<li>
<strong>BINCOME</strong> - household income (HINCP) grouped by
standard PSRC breakpoints</li>
<li>
<strong>BIN_AGE</strong> - age (AGEP) grouped by standard PSRC
breakpoints</li>
<li>
<strong>BIN_POVRATIO</strong> - ratio of household income to the
poverty level (POVPIP) w/ PSRC breakpoints (fraction, not percent)</li>
<li>
<strong>BIN_YBL</strong> - year structure was built, by current ACS
breakpoints (simplified from YBL)</li>
<li>
<strong>OWN_RENT</strong> - dichotomous tenure (simplified from
TEN)</li>
<li>
<strong>ED_ATTAIN</strong> - educational attainment (simplified from
SCHL)</li>
<li>
<strong>MI_JOBSECTOR</strong> - PSRC-defined
Manufacturing-Industrial groups (from NAICSP)</li>
<li>
<strong>LUM_JOBSECTOR</strong> - PSRC-defined land use modeling
employment sector (from NAICSP)</li>
<li>
<strong>SOCP3</strong> - <a href="https://www.bls.gov/soc/socguide.htm#LINK3" class="external-link">Standard Occupational
Code (SOC)</a> minor group (from SOCP)</li>
<li>
<strong>SOCP5</strong> - <a href="https://www.bls.gov/soc/socguide.htm#LINK3" class="external-link">Standard Occupational
Code (SOC)</a> broad occupation (from SOCP)</li>
</ul>
<p>If codes change (and they have in the past), it may be necessary to
confirm these custom variable definitions match the new data
dictionary.</p>
<p><strong>DATA_YEAR, PRODUCT, UNIT,</strong> and
<strong>COUNTY</strong> variables are always included in the table
without you having to specify them; the first three of these can be used
to identify the dataset. It is also possible to define your own
variables, as described in <a href="pums-2-make-vars.html">this
accompanying article</a>.</p>
</div>
<div class="section level3">
<h3 id="built-in-intra-survey-inflation-adjustment">Built-in intra-survey inflation adjustment<a class="anchor" aria-label="anchor" href="#built-in-intra-survey-inflation-adjustment"></a>
</h3>
<p>Because the ACS (from which the PUMS records are developed) is a
rolling survey, responses are collected at different times throughout
the year and the value of money may have changed slightly during that
time. Published ACS estimates have a ‘baked-in’ inflation adjustment
(derived from the Federal Consumer Price Index, or CPI) to account for
this. Dollar amounts in the PUMS dataset, however, are provided raw–as
they were reported–along with an average inflation adjustment factor.
Intra-survey inflation adjustment is particularly important for
multi-year (3- and 5-yr) datasets. <strong>psrccensus</strong> applies
the correct adjustment for you. PUMS estimates will not match their ACS
counterparts precisely, but the adjustment brings them closer. A
separate adjustment is still necessary if you intend to <a href="pums-3-multiyear.html#hint-3---adjust-dollar-values-for-inter-year-inflation">compare
between separate surveys</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="generate-summary-statistics">Generate summary statistics<a class="anchor" aria-label="anchor" href="#generate-summary-statistics"></a>
</h2>
<p>The second step in an analysis involves calculating summary
statistics from the result of the prior step. Because PUMS are sampled,
summary statistics must use the sampling weight in order to be expanded
to the full population. Although PUMS data exists for the entire
country, results of <strong>psrccensus</strong> are filtered to the
4-county PSRC region for simplicity.</p>
<p>There are four relevant statistical functions, along with a summary
function that gives all four in the same table.</p>
<div class="line-block">         <strong>psrc_pums_count()</strong>
(also includes shares, i.e. proportions by group)<br>
         <strong>psrc_pums_sum()</strong><br>
         <strong>psrc_pums_median()</strong><br>
         <strong>psrc_pums_mean()</strong><br>
         <strong>psrc_pums_summary()</strong>
</div>
<p>The arguments for each summary function are identical:</p>
<ul>
<li>
<strong>so</strong> - The srvyr data object returned by
<code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code>
</li>
<li>
<strong>stat_var</strong> - The numeric variable to be
summarized.</li>
<li>
<strong>group_vars</strong> - Optional grouping variable/s (if
multiple, as a character vector)</li>
</ul>
<p>Argument names can be omitted (saving keystrokes) if arguments are
provided in proper sequence; you may prefer to be explicit to avoid
confusing them.</p>
<p>All result tables make use of the <code><a href="http://gdfe.co/srvyr/reference/cascade.html" class="external-link">srvyr::cascade</a></code> feature
to provide totals at each grouping level; these are “peeled off” from
last-grouped to first. If you have multiple grouping variables, the
order in which you specify them will control how shares
<code><a href="../reference/pums_stat.html">psrc_pums_count()</a></code> are nested, for example. For any result
with COUNTY as one of the grouping variables, it will be shifted to the
left-most position in the table.</p>
<p><strong>psrccensus</strong> does not constrain your choice of
variables, but clearly any variable to be summarized must be a number,
and grouping variables should not be continuous. The
<code>stat_var</code> argument is ignored by the count function (for
which the primary variable is implicit), but is allowed since some
scripting will use identical arguments (e.g. map/apply functions).</p>
<p>Since PUMS records are sampled rather than comprising a full census,
<strong>psrccensus</strong> applies sampling weights to deliver
estimates of the full population. It also provides the tabulated margin
of error (MOE) for each estimate in a separately labeled ’_moe’
column.</p>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>As an example, to calculate 2019 median household income for the
region you would use the following function calls:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psrc.github.io/psrccensus/">psrccensus</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_psrc_pums.html">get_psrc_pums</a></span><span class="op">(</span>span <span class="op">=</span> <span class="fl">5</span>,                     <span class="co"># Denoting ACS 5-year estimates; 1-year also available</span></span>
<span>                   dyear <span class="op">=</span> <span class="fl">2019</span>,                 <span class="co"># Last data year of span</span></span>
<span>                   level <span class="op">=</span> <span class="st">"h"</span>,                  <span class="co"># Unit of analysis == household ("p" used for person)</span></span>
<span>                   vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HINCP"</span>,<span class="st">"TEN"</span><span class="op">)</span><span class="op">)</span>      <span class="co"># PUMS household income &amp; housing tenure variables; using tenure later. </span></span>
<span>                                                 <span class="co">#  - You can choose as many variables as you need.</span></span>
<span><span class="fu"><a href="../reference/pums_stat.html">psrc_pums_median</a></span><span class="op">(</span><span class="va">x</span>, stat_var <span class="op">=</span> <span class="st">"HINCP"</span><span class="op">)</span>          <span class="co"># Median Household income (without regard to tenure)</span></span>
<span><span class="co">#&gt; Index: &lt;COUNTY&gt;</span></span>
<span><span class="co">#&gt;    DATA_YEAR COUNTY HINCP_median HINCP_median_moe</span></span>
<span><span class="co">#&gt;        &lt;num&gt; &lt;char&gt;        &lt;num&gt;            &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:      2019 Region     85875.92         462.0012</span></span></code></pre></div>
<p>To calculate by a subgroup category (here, housing tenure–e.g. own
vs. rent), use the optional grouping variable argument.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pums_stat.html">psrc_pums_median</a></span><span class="op">(</span><span class="va">x</span>,                              <span class="co"># the assigned result of get_psrc_pums()</span></span>
<span>                 stat_var <span class="op">=</span> <span class="st">"HINCP"</span>,             <span class="co"># Summarizing household income . . .</span></span>
<span>                 group_vars <span class="op">=</span> <span class="st">"TEN"</span>,             <span class="co"># . . . grouped by housing tenure</span></span>
<span>                 rr<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>                        <span class="co"># w/ optional relative reliability measure</span></span>
<span><span class="co">#&gt; Index: &lt;COUNTY&gt;</span></span>
<span><span class="co">#&gt;    DATA_YEAR COUNTY                                                     TEN</span></span>
<span><span class="co">#&gt;        &lt;num&gt; &lt;char&gt;                                                  &lt;fctr&gt;</span></span>
<span><span class="co">#&gt; 1:      2019 Region                        Occupied without payment of rent</span></span>
<span><span class="co">#&gt; 2:      2019 Region                                    Owned free and clear</span></span>
<span><span class="co">#&gt; 3:      2019 Region Owned with mortgage or loan (include home equity loans)</span></span>
<span><span class="co">#&gt; 4:      2019 Region                                                  Rented</span></span>
<span><span class="co">#&gt; 5:      2019 Region                                                   Total</span></span>
<span><span class="co">#&gt;    HINCP_median HINCP_median_moe reliability</span></span>
<span><span class="co">#&gt;           &lt;num&gt;            &lt;num&gt;      &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:     35853.20        3461.4687        good</span></span>
<span><span class="co">#&gt; 2:     75141.43        1207.3342        good</span></span>
<span><span class="co">#&gt; 3:    121012.64         779.3520        good</span></span>
<span><span class="co">#&gt; 4:     59039.70         590.5977        good</span></span>
<span><span class="co">#&gt; 5:     85875.92         462.0012        good</span></span></code></pre></div>
<p>The count function tabulates the number people or households by
grouping category, depending on the level you specified in
<code><a href="../reference/get_psrc_pums.html">get_psrc_pums()</a></code>. The result represents the population (via
weighting), not the survey sample. If you intend to count things other
than people or households, such as number of bedrooms, you should use
the ‘total’ function instead, which sums the target variable.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pums_stat.html">psrc_pums_count</a></span><span class="op">(</span><span class="va">x</span>, group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COUNTY"</span>,<span class="st">"TEN"</span><span class="op">)</span><span class="op">)</span>      <span class="co"># If omitting stat_var argument, group_var must be labeled</span></span>
<span><span class="co">#&gt;     DATA_YEAR    COUNTY                                                     TEN</span></span>
<span><span class="co">#&gt;         &lt;num&gt;    &lt;fctr&gt;                                                  &lt;fctr&gt;</span></span>
<span><span class="co">#&gt;  1:      2019      King                        Occupied without payment of rent</span></span>
<span><span class="co">#&gt;  2:      2019      King                                    Owned free and clear</span></span>
<span><span class="co">#&gt;  3:      2019      King Owned with mortgage or loan (include home equity loans)</span></span>
<span><span class="co">#&gt;  4:      2019      King                                                  Rented</span></span>
<span><span class="co">#&gt;  5:      2019      King                                                   Total</span></span>
<span><span class="co">#&gt;  6:      2019    Kitsap                        Occupied without payment of rent</span></span>
<span><span class="co">#&gt;  7:      2019    Kitsap                                    Owned free and clear</span></span>
<span><span class="co">#&gt;  8:      2019    Kitsap Owned with mortgage or loan (include home equity loans)</span></span>
<span><span class="co">#&gt;  9:      2019    Kitsap                                                  Rented</span></span>
<span><span class="co">#&gt; 10:      2019    Kitsap                                                   Total</span></span>
<span><span class="co">#&gt; 11:      2019    Pierce                        Occupied without payment of rent</span></span>
<span><span class="co">#&gt; 12:      2019    Pierce                                    Owned free and clear</span></span>
<span><span class="co">#&gt; 13:      2019    Pierce Owned with mortgage or loan (include home equity loans)</span></span>
<span><span class="co">#&gt; 14:      2019    Pierce                                                  Rented</span></span>
<span><span class="co">#&gt; 15:      2019    Pierce                                                   Total</span></span>
<span><span class="co">#&gt; 16:      2019 Snohomish                        Occupied without payment of rent</span></span>
<span><span class="co">#&gt; 17:      2019 Snohomish                                    Owned free and clear</span></span>
<span><span class="co">#&gt; 18:      2019 Snohomish Owned with mortgage or loan (include home equity loans)</span></span>
<span><span class="co">#&gt; 19:      2019 Snohomish                                                  Rented</span></span>
<span><span class="co">#&gt; 20:      2019 Snohomish                                                   Total</span></span>
<span><span class="co">#&gt; 21:      2019    Region                                                   Total</span></span>
<span><span class="co">#&gt;     DATA_YEAR    COUNTY                                                     TEN</span></span>
<span><span class="co">#&gt;       count count_moe       share    share_moe</span></span>
<span><span class="co">#&gt;       &lt;num&gt;     &lt;num&gt;       &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:    9809  911.8524 0.011121000 0.0010298861</span></span>
<span><span class="co">#&gt;  2:  139287 2584.2387 0.157917293 0.0028450240</span></span>
<span><span class="co">#&gt;  3:  360264 4093.7687 0.408451008 0.0045028055</span></span>
<span><span class="co">#&gt;  4:  372665 3705.7797 0.422510700 0.0041018443</span></span>
<span><span class="co">#&gt;  5:  882025 2590.7544 0.550215058 0.0007820053</span></span>
<span><span class="co">#&gt;  6:    1050  264.3761 0.010104704 0.0025303543</span></span>
<span><span class="co">#&gt;  7:   20613  932.9733 0.198369774 0.0091042955</span></span>
<span><span class="co">#&gt;  8:   50188 1303.0872 0.482985603 0.0120890741</span></span>
<span><span class="co">#&gt;  9:   32061 1438.1421 0.308539918 0.0133138978</span></span>
<span><span class="co">#&gt; 10:  103912  825.0617 0.064821232 0.0005014429</span></span>
<span><span class="co">#&gt; 11:    4842  633.5231 0.014976987 0.0019467030</span></span>
<span><span class="co">#&gt; 12:   55867 1533.3655 0.172804489 0.0047299721</span></span>
<span><span class="co">#&gt; 13:  144747 2256.6103 0.447722830 0.0063607655</span></span>
<span><span class="co">#&gt; 14:  117840 1987.7314 0.364495694 0.0060002722</span></span>
<span><span class="co">#&gt; 15:  323296 1667.2687 0.201674927 0.0008483700</span></span>
<span><span class="co">#&gt; 16:    2725  572.2176 0.009274323 0.0019470961</span></span>
<span><span class="co">#&gt; 17:   49858 1504.8450 0.169687770 0.0051290576</span></span>
<span><span class="co">#&gt; 18:  146424 2358.2766 0.498342534 0.0076139486</span></span>
<span><span class="co">#&gt; 19:   94815 2360.0541 0.322695373 0.0079455338</span></span>
<span><span class="co">#&gt; 20:  293822 1169.4687 0.183288783 0.0007286581</span></span>
<span><span class="co">#&gt; 21: 1603055 3804.6599 1.000000000 0.0000000000</span></span>
<span><span class="co">#&gt;       count count_moe       share    share_moe</span></span></code></pre></div>
<p>The summary function provides all four statistics and their margins
of error in the same table.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pums_stat.html">psrc_pums_summary</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"HINCP"</span>, <span class="st">"TEN"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Notice the statistical functions leave the data object itself
unchanged, so if desired it can be used repeatedly, with various
grouping variable combinations (as long as they share the same unit of
analysis–i.e. persons or households). As described in <a href="make-your-own-pums-vars.html#handle-subsets-via-a-universal-variable-the-incl_nafalse-option">the
accompanying article</a>, the recommended workflow maintains the data
object whole (rather than discarding observations specific to one
analysis or another).</p>
</div>
</div>
<div class="section level2">
<h2 id="sample-sizes-confidence-and-error-margins">Sample sizes, confidence, and error margins<a class="anchor" aria-label="anchor" href="#sample-sizes-confidence-and-error-margins"></a>
</h2>
<p>Although <strong>psrccensus</strong> allows you to specify multiple
grouping variables, you’ll need to keep in mind that there are limits to
what can be usefully determined from small subsets of respondents within
PUMS. To draw responsible conclusions from PUMS data, you’ll need to
examine the margins of error (MOE) <strong>psrccensus</strong>
calculates along with the estimate. (This is when PUMS via
<strong>psrccensus</strong> really shines, since it can be laborious to
calculate the MOE without dedicated statistical software.) Margins of
error in the PUMS are given in the same units as the estimate (as with
ACS), so it is easy to get the bounds of the 90 percent confidence
interval by both adding the MOE to the estimate and subtracting the MOE
from it.</p>
<p>If there are few respondents in a category combination, the margin of
error may be beyond calculation (NaN, or ‘not a number’), or so large
that the estimate itself has little practical value. In these cases, you
may want to consider either switching from the 1-year to 5-year span
(the latter has a larger sample), potentially analyze dimensions of the
data separately rather than in combination, or potentially change the
categories you are using (e.g. use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate</a></code> to create
a less disaggregate variable).</p>
<div class="section level3">
<h3 id="determining-difference">Determining difference<a class="anchor" aria-label="anchor" href="#determining-difference"></a>
</h3>
<p>Is there an actual difference between two statistics generated from
PUMS data? To know, you’ll need to examine the margins of error. As a
rule of thumb, if there is overlap in the 90 percent confidence
intervals of the two estimates, you cannot conclude the values are
different. To perform a more careful test, you can calculate the Z
score:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><mrow><mo stretchy="true" form="prefix">|</mo><mi>E</mi><mi>s</mi><msub><mi>t</mi><mn>1</mn></msub><mo>−</mo><mi>E</mi><mi>s</mi><msub><mi>t</mi><mn>2</mn></msub><mo stretchy="true" form="postfix">|</mo></mrow><msqrt><mrow><mi>M</mi><mi>O</mi><msubsup><mi>E</mi><mrow><mi>e</mi><mi>s</mi><mi>t</mi><mn>1</mn></mrow><mn>2</mn></msubsup><mo>+</mo><mi>M</mi><mi>O</mi><msubsup><mi>E</mi><mrow><mi>e</mi><mi>s</mi><mi>t</mi><mn>2</mn></mrow><mn>2</mn></msubsup></mrow></msqrt></mfrac><annotation encoding="application/x-tex">\frac{|Est_{1} - Est_{2}|}{\sqrt{MOE_{est1}^2 + MOE_{est2}^2}}</annotation></semantics></math>
There is only a meaningful difference between two estimates if the Z
score is greater than 1. This test can be applied between different
years, or between PUMS and ACS. However, please remember Census warns
against drawing comparisons between estimates generated from different
spans (e.g. 1yr with 5yr), especially if they overlap (as the same
observations may be exist in both).</p>
<p>The <code><a href="../reference/z_score.html">z_score()</a></code> convenience function performs this
calculation:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pums_stat.html">psrc_pums_median</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"HINCP"</span>, <span class="st">"TEN"</span><span class="op">)</span></span>
<span><span class="va">c1</span> <span class="op">&lt;-</span> <span class="va">rs</span><span class="op">[</span><span class="fl">1</span>,<span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">rs</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">rs</span><span class="op">)</span><span class="op">]</span>                <span class="co"># First-line estimate and its MOE (as numeric vector)</span></span>
<span><span class="va">c2</span> <span class="op">&lt;-</span> <span class="va">rs</span><span class="op">[</span><span class="fl">3</span>,<span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">rs</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">rs</span><span class="op">)</span><span class="op">]</span>                <span class="co"># Third-line estimate and its MOE (as numeric vector)</span></span>
<span><span class="fu"><a href="../reference/z_score.html">z_score</a></span><span class="op">(</span><span class="va">c1</span>, <span class="va">c2</span><span class="op">)</span>                                  <span class="co"># A true difference indicated by score &gt; 1</span></span>
<span><span class="co">#&gt;    HINCP_median HINCP_median_moe</span></span>
<span><span class="co">#&gt;           &lt;num&gt;            &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:           NA               NA</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Helmann, Christy Lam, Polina Butrina, Suzanne Childress, Michael Jensen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
